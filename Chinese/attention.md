##### 3.5 位置编码

鉴于我们的模型没有设计循环与卷积机制，为了让模型学到序列信息，我们必须在模型中插入单词在序列中的相对位置或者绝对位置信息。因此，我们在输入的嵌入层，也就是编码器和解码器的最底层，添加了“位置编码”信息。位置编码和词嵌入的维度$d_{model}$保持一致，使得这两者可以相加。可供选择的位置编码有很多种，可训练的与固定的。

​		本次实验中，我们选择不同频率的sine与cosine方程计算位置编码：

​																					$PE_{(pos, 2i)} = sin(pos/10000^{2i/d_{model}})$

​																					$PE_{(pos, 2i+1)} = cos(pos/10000^{2i/d_{model}})$

​		pos 代表位置，i 代表维度，即，位置编码的每个维度对应着一条正弦曲线。它们的波长构成了一个从 $2\pi$ 到 $10000\cdot2\pi$ 等比数列。之所以选择这样的形式进行位置编码，是因为我们认为它给模型提供了相对位置信息。因为对于任意一个固定偏移量 k ，$PE_{pos+k}$ 能表示为 $PE_{pos}$ 的一个线性变换。

​		我们同样测试了可训练的位置编码的效果，结果发现这两者的结果没有太大差别。我们最终采用了正弦的版本是因为它在序列比训练数据中的序列更长时也能发挥作用。

